@import './designSystem'

.musics
  width: 100%

  &.loading
    max-height: calc(100vh - rem(380))
    overflow: hidden
    position: relative

    +mq(maxMedium)
      max-height: calc(100vh - rem(297))

    &::after
      content: ''
      position: absolute
      bottom: 0
      left: 0
      width: 100%
      height: rem(72)
      background: linear-gradient(180deg, rgba(255, 255, 255, 0), #fff 100%)

      body[data-theme="dark"] &
        background: linear-gradient(180deg, rgba(0, 0, 0, 0), #000 100%)

  ul
    display: flex
    flex-direction: column

    +mq(minSmall)
      flex-direction: row
      flex-wrap: wrap

    li
      border-top: 1px solid var(--border)

      +mq(minSmall)
        display: flex
        width: 50%

      +mq(minLarge)
        width: 33.33%

      +mq(minExtraLarge)
        width: 25%

      .skeleton
        background: linear-gradient(90deg, #EEEEEE 25%, #DDDDDD 50%, #EEEEEE 75%)
        background-size: 200% 100%
        animation: loading 1.5s infinite

        body[data-theme="dark"] &
          background: linear-gradient(90deg, #111111 25%, #222222 50%, #111111 75%)
          background-size: 200% 100%
          animation: loading 1.5s infinite

      &.loading-indicator
        .button
          display: flex
          align-items: center
          gap: rem(23)
          padding: rem(17) 0
          width: 100%

        i
          display: block
          width: rem(72)
          height: rem(72)

        span
          display: flex
          flex-direction: column
          gap: rem(5)
          padding-right: rem(12)

          strong, cite
            height: rem(18)

          strong
            width: rem(102)

          cite
            width: rem(72)

      > img
        +screen-reader-only

      > button
        display: flex
        align-items: center
        gap: rem(23)
        background: none
        padding: rem(17) 0
        width: 100%

        +mq(minMedium)
          flex-grow: 1

        img
          width: rem(72)
          height: rem(72)

        span
          display: flex
          flex-direction: column
          gap: rem(5)
          padding-right: rem(12)

          strong, cite
            justify-content: flex-start
            position: relative
            color: var(--txt-subject)
            text-align: left
            transition: all .4s cubic-bezier(.4,0,.2,1)
            white-space: break-spaces
            word-wrap: break-word
            word-break: normal

          strong
            font-size: rem(16)
            line-height: 1.125

          cite
            display: inline-block
            font-size: rem(14)
            line-height: 1.28571429

.music
  .control
    display: flex
    justify-content: center
    gap: rem(23)
    padding: rem(12) rem(12) 0

    + p
      padding-bottom: rem(12)
      font-size: rem(16)
      font-weight: 800!important

    label
      display: flex
      align-items: center
      gap: rem(5)

      input
        +screen-reader-only

      i
        display: inline-block
        width: rem(25)
        height: rem(25)

      span, strong
        font-size: rem(16)

  .dialog
    position: fixed
    display: flex
    flex-direction: column
    justify-content: center
    align-items: center
    top: 0
    left: 0
    z-index: 1070
    border: 0
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)
    width: 100%
    height: 100%
    background-color: var(--default-bg)
    backdrop-filter: blur(rem(20))

    +mq(minMedium)
      padding: rem(52)
      background-color: var(--bg-reverse-opacity)

    dl + p.report-video
      padding-top: rem(12)
      padding-bottom: 0

    p.report-video
      font-size: rem(14)
      line-height: 1.28571429
      padding-bottom: rem(12)
      padding-left: rem(17)
      text-indent: rem(-17)

      i
        display: inline-block
        margin-right: rem(3)
        width: rem(14)
        height: rem(14)
        vertical-align: middle

      button
        background: 0
        border: 0
        padding: 0
        font-size: rem(14)
        font-weight: 800
        color: red
        vertical-align: text-bottom

    &.tablet, &.onlyMusic
      &:not(.mv)
        .container
          .info
            .yt
              width: rem(170)
              +coln

      .container
        flex-direction: column

        .info
          flex-direction: row

          .yt, .summary
            +col

          .summary
            h2
              padding-top: 0

            dl
              padding-bottom: 0

              & + p.report-video
                padding-top: rem(12)

        .info, .lyrics
          flex: auto
          gap: rem(23)

    &:not(.mv)
      &.instrument
        +mq(minMedium)
          padding: rem(52) rem(140)

        .container
          max-width: rem(720)

        .info
          display: flex
          flex-direction: column

          +mq(minMedium)
            flex-direction: row-reverse
            gap: rem(23)

            .yt, .summary
              +col

      .info
        .yt
          +mq(maxSmall)
            max-width: rem(370)

    .container
      display: flex
      flex-direction: column
      position: relative
      gap: rem(12)
      padding: rem(52) rem(27) rem(27)
      width: 100%
      height: 100dvh
      background-color: var(--default-bg)
      overflow: hidden

      +mq(minMedium)
        flex-direction: row
        gap: rem(32)
        height: auto
        max-height: calc(100vh - rem(104))

      > a
        position: absolute
        top: rem(12)
        left: rem(25)
        display: inline-flex
        gap: rem(3)
        background-color: $hex-black
        border-radius: rem(3)
        padding: rem(6) rem(12)
        color: $hex-white
        font-size: rem(14)

        i
          display: inline-block
          width: rem(67)
          height: rem(20)

        span
          +screen-reader-only

      > button
        position: absolute
        top: rem(12)
        right: rem(25)
        width: rem(32)
        height: rem(32)
        background-color: transparent

        +mq(minMedium)
          right: rem(12)

        i
          display: inline-block
          width: rem(32)
          height: rem(32)

        span
          +screen-reader-only

    .info, .lyrics
      +mq(minMedium)
        +col

    .summary
      h2, cite
        color: var(--txt-summary)

      h2
        font-size: rem(16)

        +mq(minMedium)
          font-size: rem(20)

      cite
        font-size: rem(14)
        display: block

        +mq(minMedium)
          font-size: rem(16)

        button
          background-color: $hex-accent
          margin-left: rem(7)
          border: 0
          border-radius: rem(3)
          padding: rem(1) rem(5)
          font-size: rem(14)
          font-weight: 800
          color: $hex-white

          +mq(minSmall)
            display: none

    .info
      display: flex
      flex-direction: column

      .yt
        width: 100%
        max-height: 100vh
        max-width: none

        img
          max-width: 100%

      .summary
        h2
          padding-top: rem(12)

    .lyrics
      overflow: hidden
      display: flex
      flex-direction: column

      .summary
        cite
          padding-bottom: rem(12)

      dl
        padding-top: 0

    dl
      display: flex
      flex-direction: column
      gap: rem(7)
      padding: rem(17) 0

      +mq(minSmall)
        gap: rem(2)
        padding: rem(23) 0

      &.hidden
        +mq(maxExtraSmall)
          display: none

      > div
        display: inline-flex
        gap: rem(2)

        +mq(maxExtraSmall)
          flex-direction: column

        +mq(minSmall)
          gap: rem(17)

        > div
          display: inline-flex
          gap: rem(2)

          +mq(minSmall)
            gap: rem(7)

        dt, dd
          font-size: rem(14)

        dt
          width: rem(57)
          color: var(--txt-summary)
          white-space: nowrap

          +mq(maxExtraSmall)
            line-height: 1

        dd
          font-weight: 700
          color: var(--txt-subject)
          white-space: break-spaces
          word-wrap: break-word
          word-break: normal

          +mq(minSmall)
            +col

      & + p.report-video
        padding-top: 0
        padding-bottom: rem(12)

      & + button
        justify-content: center
        background-color: $hex-accent
        margin: rem(17) 0
        border-radius: rem(3)
        width: 100%
        font-size: rem(14)
        font-weight: 700
        color: $hex-white

    p
      padding-right: rem(17)
      font-size: rem(20)
      font-weight: 800
      color: var(--txt-subject)
      text-align: left !important
      white-space: break-spaces
      word-wrap: break-word
      word-break: keep-all

      &.hidden
        +mq(maxExtraSmall)
          display: none

      & + button
        justify-content: center
        background-color: $hex-accent
        margin: rem(17) 0
        border-radius: rem(3)
        width: 100%
        font-size: rem(14)
        font-weight: 700
        color: $hex-white

  &.mpb
    + footer
      margin-bottom: rem(81)

  .player-bar
    background-color: $hex-dark
    position: fixed
    bottom: 0
    left: 0
    z-index: 7777
    width: 100%

    .hidden
      +screen-reader-only

    .show
      background-color: $hex-black
      height: calc(100vh - rem(93))

      .player-close
        position: absolute
        top: calc(env(safe-area-inset-top) + rem(32))
        right: rem(32)
        z-index: 77
        width: rem(25)
        height: rem(25)

        button
          width: rem(25)
          height: rem(25)
          background-color: transparent

          i
            display: block
            width: rem(25)
            height: rem(25)

          span
            +screen-reader-only

      +mq(landscape)
        display: flex
        flex-direction: row-reverse

        .cover, .lyrics
          +col

        .lyrics
          flex-grow: 1
          z-index: 7
          padding: calc(env(safe-area-inset-top) + rem(52)) calc(env(safe-area-inset-right) + rem(27)) rem(52) 0

          p
            font-size: rem(24)
            color: $hex-white

          ~ .cover
            &.YouTube .youtube .youtube-wrapper
              > div:first-of-type
                width: 100%
                height: auto

              .thumbnail, .dummy
                position: absolute
                bottom: 0
                left: 50%
                width: 100%
                height: auto
                transform: translateX(-50%)
                aspect-ratio: 1920 / 1080

              .thumbnail
                img
                  display: block
                  width: 100%
                  height: 100%
                  object-fit: cover
                  aspect-ratio: 1920 / 1080

                button
                  position: absolute
                  top: 50%
                  left: 50%
                  transform: translate(-50%, -50%)

      .cover
        display: flex
        flex-direction: column
        gap: rem(27)
        padding: calc(env(safe-area-inset-top) + rem(32)) rem(52) rem(32) calc(env(safe-area-inset-left) + rem(52))
        height: calc(100vh - rem(93))

        +mq(portrait)
          padding: calc(env(safe-area-inset-top) + rem(32)) 0 calc(env(safe-area-inset-bottom) + rem(32))

        &.YouTube
          .background
            position: absolute
            top: 0
            left: 0
            width: 100%
            height: 100%

            > div:first-of-type
              position: absolute
              aspect-ratio: 1920 / 1080
              height: 100%

            .dummy
              position: absolute
              top: 0
              left: 0
              width: 100%
              height: 100%
              background-color: rgba($hex-black, .7)
              backdrop-filter: blur(rem(100))

          div:not(.background)
            z-index: 2

          .youtube
            display: flex
            flex-direction: column
            justify-content: center
            align-items: center
            flex-grow: 1
            gap: rem(27)

            +mq(landscape)
              position: relative
              height: calc(100vh - rem(218))

            +mq(portrait)
              position: relative
              height: calc(100vh - rem(91))

            .youtube-wrapper
              position: relative
              justify-content: center
              flex-grow: 1
              align-items: flex-end
              width: 90%

              div:first-of-type
                height: 100%
                aspect-ratio: 16 / 9

              +mq(landscape)
                position: absolute
                top: 0
                left: 0
                display: flex
                justify-content: center
                align-items: flex-end
                width: 100%
                height: 50%

                > div:first-of-type
                  position: absolute
                  bottom: 0
                  left: 50%
                  width: auto
                  transform: translateX(-50%)

                .dummy
                  button
                    transition: all .4s cubic-bezier(.4,0,.2,1)
                    opacity: 0

                    &:hover
                      opacity: 1

                .thumbnail, .dummy
                  position: absolute
                  bottom: 0
                  left: 50%
                  width: 100%
                  height: auto
                  transform: translateX(-50%)
                  aspect-ratio: 1920 / 1080

                  img
                    aspect-ratio: 1920 / 1080

                  button
                    display: flex
                    position: absolute
                    top: 0
                    left: 0
                    background-color: transparent
                    justify-content: center
                    align-items: center
                    width: 100%
                    height: 100%
                    aspect-ratio: 1920 / 1080

                    em
                      transition: all .4s cubic-bezier(.4,0,.2,1)
                      display: flex
                      justify-content: center
                      align-items: center
                      background-color: rgba(244, 246, 250, .9)
                      border-radius: rem(52)
                      width: rem(52)
                      height: rem(52)

                      i
                        display: block
                        width: rem(36)
                        height: rem(36)

                    span
                      +screen-reader-only

              +mq(portrait)
                position: absolute
                top: 0
                left: 50%
                transform: translateX(-50%)
                display: flex
                justify-content: center
                align-items: flex-end
                width: 90%
                height: 50%

                div:first-of-type
                  display: flex
                  align-items: flex-end
                  width: 100%
                  height: 100%
                  aspect-ratio: 16 / 9

                .thumbnail
                  button
                    em
                      transition: all .4s cubic-bezier(.4,0,.2,1)
                      display: flex
                      justify-content: center
                      align-items: center
                      background-color: rgba(244, 246, 250, .9)
                      border-radius: rem(52)
                      width: rem(52)
                      height: rem(52)

                      i
                        display: block
                        width: rem(36)
                        height: rem(36)

                .thumbnail, .dummy
                  position: absolute
                  top: 0
                  left: 0
                  width: 100%
                  height: 100%
                  aspect-ratio: 16 / 9

                  img
                    max-width: 100%
                    max-height: 100%
                    height: auto
                    object-fit: cover
                    aspect-ratio: 1920 / 1080
                    width: 100%

                  button
                    display: flex
                    position: absolute
                    top: 0
                    left: 0
                    background-color: transparent
                    justify-content: center
                    align-items: center
                    width: 100%
                    height: 100%
                    aspect-ratio: 1920 / 1080

                    span
                      +screen-reader-only

            iframe
              aspect-ratio: 1920 / 1080
              width: 100%

              +mq(landscape)
                height: 100%

              +mq(portrait)
                max-width: 100%
                max-height: 100%
                height: auto
                object-fit: contain

          .thumbnail
            position: absolute
            width: 0
            height: 0
            overflow: hidden

        &:not(.YouTube)
          .background
            position: absolute
            top: 0
            left: 0
            width: 100%
            height: 100%

            img
              width: 100%
              height: 100%
              object-fit: cover

            div:not(.dummy)
              position: absolute
              width: 0
              height: 0
              overflow: hidden

            .dummy
              position: absolute
              top: 0
              left: 0
              width: 100%
              height: 100%
              background-color: rgba($hex-black, .7)
              backdrop-filter: blur(rem(100))

          div:not(.background)
            z-index: 2

          .youtube
            position: absolute
            width: 0
            height: 0
            overflow: hidden

          .music-lyrics
            display: flex
            flex-direction: column
            gap: rem(52)
            margin: 0 auto
            width: 90%

            ~ .thumbnail > .controller
              height: auto

            .music-info
              display: flex
              gap: rem(17)

              .song-cover
                width: rem(47)
                height: rem(47)

                img
                  aspect-ratio: 1 / 1

              .summary
                display: flex
                flex-direction: column
                padding-top: 0
                padding-bottom: 0

                h2
                  font-size: rem(16)
                  font-weight: 800
                  color: $hex-white

                cite
                  font-size: rem(14)
                  color: $hex-light

            .lyrics
              height: calc(100vh - rem(296))

              p
                font-size: rem(24)
                color: $hex-light

            ~ .thumbnail
              .controller
                top: 0!important

          .thumbnail
            display: flex
            flex-direction: column
            justify-content: center
            align-items: center
            flex-grow: 1
            gap: rem(27)

            +mq(landscape)
              position: relative
              height: calc(100vh - rem(218))

            +mq(portrait)
              justify-content: space-between
              position: relative
              height: calc(100vh - rem(91))

            > div:not(.summary)
              display: flex
              justify-content: center
              flex-grow: 1

              +mq(landscape)
                align-items: flex-end
                position: absolute
                top: 0
                left: 0
                width: 90%
                height: 50%

              +mq(portrait)
                position: absolute
                top: 0
                left: 50%
                transform: translateX(-50%)
                width: 90%
                height: 50%

            .controller
              +mq(portrait)
                top: 50%!important

            img
              aspect-ratio: 1 / 1
              width: auto

              +mq(landscape)
                height: 72%

              +mq(portrait)
                max-width: 100%
                height: 100%
                object-fit: contain

        .switching
          position: relative
          text-align: center

          ul
            display: inline-flex
            background-color: rgba($hex-white, .2)
            border-radius: rem(32)
            height: rem(32)

            li
              display: inline-flex
              height: rem(32)

            button
              display: inline-flex
              align-items: center
              background-color: transparent
              border-radius: rem(32)
              padding: 0 rem(16)
              height: rem(32)
              font-size: rem(14)
              color: $hex-white

              &:not(.current)
                &.isNotYouTube
                  padding-right: rem(8)

                &.isYouTube
                  padding-left: rem(8)

              &.current
                background-color: $hex-accent
                color: $hex-black

          ~ .music-lyrics
            .lyrics
              height: calc(100vh - 355px)

        .controller
          display: flex
          flex-direction: column
          justify-content: flex-end!important
          width: 90%

          +mq(portrait)
            position: absolute
            top: 50%
            left: 50%
            transform: translateX(-50%)
            width: 90%

          +mq(portrait)
            height: 50%

          .summary
            width: 100%

            h2
              font-size: rem(24)
              font-weight: 800
              color: $hex-white

            cite
              font-size: rem(20)
              color: $hex-white

            dl
              display: flex
              flex-direction: column
              margin-top: rem(12)

              div
                display: inline-flex
                flex-wrap: wrap

                dt, dd
                  font-size: rem(14)
                  color: $hex-light

                dt
                  width: rem(72)

                dd
                  +col
                  word-break: keep-all
                  word-wrap: break-word

          button
            background-color: transparent

          .seekbar
            position: relative
            width: 100%
            height: rem(12)

            &::before
              content: ''
              position: absolute
              top: rem(5)
              left: 0
              width: 100%
              height: rem(2)
              background-color: #7F7F7F
              transition: all .4s cubic-bezier(.4,0,.2,1)

            &:hover
              &::before
                top: 0
                border-radius: rem(12)
                height: rem(12)

              span
                top: 0
                border-radius: rem(12)
                height: 100%

              em
                top: 0

            span
              position: absolute
              top: rem(5)
              left: 0
              height: rem(2)
              background-color: $hex-accent
              transition: all .4s cubic-bezier(.4,0,.2,1)

            em
              position: absolute
              top: 0
              z-index: 1
              background-color: #EF233C
              border-radius: rem(12)
              width: rem(12)
              height: rem(12)
              transition: all .4s cubic-bezier(.4,0,.2,1)

              &.left
                i
                  left: 0!important
                  transform: none!important

              &.right
                i
                  left: auto!important
                  right: 0!important
                  transform: none!important

              i
                position: absolute
                top: rem(17)
                left: 50%
                transform: translateX(-50%)
                background-color: $hex-white
                border-radius: rem(3)
                padding: rem(3) rem(5)
                font-size: rem(12)
                font-weight: 800
                font-style: normal
                line-height: 1
                color: $hex-black

          .option
            display: flex
            justify-content: space-between
            padding-top: rem(12)

            .lyricsText
              display: flex
              justify-content: center
              align-items: center

              i
                display: block
                width: rem(27)
                height: rem(27)

              span
                +screen-reader-only

            .play
              display: flex
              align-items: center

              span
                +screen-reader-only

              .skip-button
                i
                  display: block
                  width: rem(37)
                  height: rem(37)

              .play-button
                i
                  display: block
                  width: rem(82)
                  height: rem(82)

            .repeat
              display: flex
              justify-content: center
              align-items: center

              i
                display: block
                width: rem(27)
                height: rem(27)

              span
                +screen-reader-only

        .summary
          display: flex
          flex-direction: column
          justify-content: flex-start
          align-items: flex-start
          padding-top: rem(52)
          width: 90%

          +mq(landscape)
            position: absolute
            top: 50%
            left: 0
            padding-top: rem(52)
            padding-bottom: 0

          +mq(portrait)
            flex-grow: 1

          h2
            font-size: rem(32)
            font-weight: 800
            color: $hex-white

          cite
            font-size: rem(24)
            color: $hex-white

          dl
            display: flex
            flex-direction: column
            margin-top: rem(12)

            div
              display: inline-flex
              flex-wrap: wrap

              dt, dd
                font-size: rem(14)
                color: $hex-light

              dt
                width: rem(72)

              dd
                +col
                word-break: keep-all
                word-wrap: break-word

    .portrait
      height: 100vh

      .cover
        height: 100vh

    .player
      position: relative
      z-index: 2
      display: flex
      justify-content: space-between
      width: 100%
      padding: rem(23) calc(env(safe-area-inset-right) + rem(23)) calc(env(safe-area-inset-bottom) + rem(23)) calc(env(safe-area-inset-left) + rem(23))

      button
        background-color: transparent

      .seekbar
        position: absolute
        top: rem(-6)
        left: 0
        width: 100%
        height: rem(12)

        &::before
          content: ''
          position: absolute
          top: rem(5)
          left: 0
          width: 100%
          height: rem(2)
          background-color: #7F7F7F
          transition: all .4s cubic-bezier(.4,0,.2,1)

        &:hover
          height: rem(12)

          &::before
            top: 0
            height: rem(12)

          span
            top: 0
            height: 100%

          em
            top: 0

        span
          position: absolute
          top: rem(5)
          left: 0
          height: rem(2)
          background-color: $hex-accent
          transition: all .4s cubic-bezier(.4,0,.2,1)

        em
          position: absolute
          top: 0
          z-index: 1
          background-color: #EF233C
          border-radius: rem(12)
          width: rem(12)
          height: rem(12)
          transition: all .4s cubic-bezier(.4,0,.2,1)

          &.left
            i
              left: 0!important
              transform: none!important

          &.right
            i
              left: auto!important
              right: 0!important
              transform: none!important

          i
            position: absolute
            top: rem(17)
            left: 50%
            transform: translateX(-50%)
            background-color: $hex-white
            border-radius: rem(3)
            padding: rem(3) rem(5)
            font-size: rem(12)
            font-weight: 800
            font-style: normal
            line-height: 1
            color: $hex-black

      .duration
        position: absolute
        top: rem(17)
        right: rem(23)
        font-size: rem(12)
        font-weight: 800
        font-style: normal
        line-height: 1
        color: $hex-accent

      .song
        position: relative
        display: flex
        gap: rem(17)
        max-width: calc(100vw - rem(227))

        +mq(minMedium)
          max-width: 50%
          padding-right: rem(126)

        button
          position: absolute
          top: 0
          left: 0
          width: 100%
          height: 100%
          background-color: transparent

          span
            +screen-reader-only

        .cover, .cover img
          display: block

        .info
          display: flex
          flex-direction: column
          justify-content: center
          gap: rem(7)

          strong
            font-size: rem(16)
            font-weight: 800
            color: $hex-light-subject
            +line-abbr(1, 16, 1)

            span
              +screen-reader-only

          cite
            font-size: rem(14)
            color: $hex-light-summary
            +line-abbr(1, 14, 1)

      .play
        position: absolute
        top: 50%
        display: flex
        align-items: center

        +mq(maxSmall)
          right: rem(62)
          transform: translateY(-50%)

        +mq(minMedium)
          left: 50%
          transform: translate(-50%, -50%)

        span
          +screen-reader-only

        .skip-button
          i
            display: block
            width: rem(37)
            height: rem(37)

        .play-button
          i
            display: block
            width: rem(52)
            height: rem(52)

      .repeat
        display: flex
        justify-content: center
        align-items: center

        i
          display: block
          width: rem(27)
          height: rem(27)

        span
          +screen-reader-only

  article
    margin: 0 auto
    padding: 0 rem(15)
    max-width: rem(720)
    width: 100%

    header
      padding: rem(17) 0

      h2
        font-size: rem(24)
        line-height: 1.16666667
        color: var(--txt-subject)

      time
        font-size: rem(14)
        color: var(--txt-blockquote)

    .description
      padding: rem(27) 0

      p
        font-size: rem(16)
        line-height: 1.25
        color: var(--txt-summary)

@keyframes loading
  0%
    background-position: 200% 0

  100%
    background-position: -200% 0
